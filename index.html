<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<style>
</style>
<script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
<div id="container">
	<svg id="chart"></svg>
</div>
</body>
<script type="text/javascript">
	var law_type = [];
	var svg = d3.select("#chart")
		.attr("preserveAspectRatio", "xMinYMin meet")
		.attr("viewBox", "0 0 1280 1024");
		
	var width = 960;
	var height = 500;

	d3.csv("./data/State Firearm Law.csv", function(law_data){
		
		// data using state as first key and type of law as second key
		var law_state = d3.nest()
			.key(function(d){ return d["State"];})
			.key(function(d){ return d["Type of Law"];})
			.entries(law_data);
		
		console.log(law_state)
		
			
		var color = d3.scaleLinear()
			.range(["rgb(213,222,217)", "rgb(69,173,168)",
					"rgb(84,36,55)", "rgb(217,91,67)"]);
				  
		// D3 Projection
		var projection = d3.geoAlbersUsa()
			.translate([width/2, height/2])
			.scale([1000]);   

		var path = d3.geoPath()
		  .projection(projection);

		// drawing us map
		d3.json("./data/us-states.json", function(json) {		
			svg.selectAll("path")
				.data(json.features)
				.enter()
				.append("path")
				.attr("d", path)
				.attr("id", function(d){ return d["properties"]["NAME"];})
				.classed("state", true)
				.style("stroke", "#fff")
				.style("stroke-width", "1")
				.style("fill", "rgb(213,222,217)");
		});
	});
	

</script>
</html>